(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/yifanshang/detail"],{"39fb":function(t,i,o){"use strict";var n=o("cbdc"),e=o.n(n);e.a},"3c43":function(t,i,o){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o("26cb");function e(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,n)}return o}function s(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?e(Object(o),!0).forEach((function(i){r(t,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}))}return t}function r(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}var u=function(){Promise.all([o.e("common/vendor"),o.e("pages/yifanshang/components/PayCard")]).then(function(){return resolve(o("06f9"))}.bind(null,o)).catch(o.oe)},c=function(){o.e("pages/yifanshang/components/RoomPopup").then(function(){return resolve(o("a17c"))}.bind(null,o)).catch(o.oe)},a=function(){o.e("pages/yifanshang/components/RecordList").then(function(){return resolve(o("f66e"))}.bind(null,o)).catch(o.oe)},h=function(){o.e("pages/yifanshang/components/OpenBoxPopup").then(function(){return resolve(o("607e"))}.bind(null,o)).catch(o.oe)},f={components:{PayCard:u,RoomPopup:c,RecordList:a,OpenBoxPopup:h},data:function(){return{uuid:"",info:{room:{}},is_show:0,payTotal:0,isPayPopup:!1,isRoomPopup:!1,startMoving:!1,selectedRoom:{},isShowDetail:!1,isOpenPopup:!1,isRecordList:!1,isSharePopup:!1,order:{},roomId:"",is_noe:!0,up_next:!1,istry:!1}},computed:s(s({},(0,n.mapGetters)(["userInfo"])),{},{payInfo:function(){return this.info&&this.info.room?{room_id:this.info.room.id,pay_total:this.payTotal,title:this.info.title,money_price:this.info.money_price,score_price:this.info.score_price}:{}},isAllPickDisable:function(){return!this.info.last_stock_all_pick_enable||this.info.last_stock_all_pick_enable>this.info.room.stock},share:function(){return{title:"[第"+this.info.room.num+"箱]"+this.info.title,path:"/pages/yifanshang/detail?uuid="+this.info.uuid+"&roomId="+this.info.room.id+"&invite_node=yifanshang-"+this.info.uuid}},showSkuTitleList:function(){var t=JSON.parse(JSON.stringify(this.info.skus||[]));return t.splice(0,6)},posterInfo:function(){return{money_price:this.info.money_price,score_price:this.info.score_price,title:this.info.title,path:this.getShareConfig().path,thumb:this.info.thumb}}}),watch:{},filters:{fixNumber:function(t){return t<10?"0"+t:t}},onLoad:function(i){var o=this;this.uuid=i.uuid,this.roomId=i.roomId||"",t.$on("startShare",(function(){o.isSharePopup=!0}))},onUnload:function(){},onPullDownRefresh:function(){this.$showPullRefresh(),this.initData()},onShow:function(){t.showLoading({title:"加载中"}),this.initData().then((function(i){t.hideLoading()}))},onReachBottom:function(){},methods:{handleTry:function(){var i=this;this.istry?t.showModal({title:"退出提示",content:"即将退出试玩模式",confirmText:"同意退出",cancelText:"取消",success:function(o){o.confirm&&(t.showLoading({title:"操作中~"}),i.istry=!1,i.setTitleText(),t.hideLoading())}}):t.showModal({title:"试玩提示",content:"试玩开出的奖品仅作为演示作用，不可作发货及其它作用",confirmText:"同意试玩",cancelText:"取消",success:function(o){o.confirm&&(t.showLoading({title:"操作中~"}),i.istry=!0,i.setTitleText(),t.hideLoading())}})},lastRoom:function(){if(1===this.info.room.num)return t.showToast({title:"没有上一箱了~",icon:"none"}),!1;this.changeRoom({id:this.roomId-1})},nextRoom:function(){if(this.info.room.num==this.info.room_total)return t.showToast({title:"没有下一箱了~",icon:"none"}),!1;this.changeRoom({id:this.roomId+1})},hideSharePopup:function(){this.isSharePopup=!1},isEnableBtn:function(t){var i=!0;return i=0===t?!this.info.is_limit_1&&this.isAllPickDisable&&this.info.room.stock:1===t?this.info.room&&this.info.room.stock:!this.info.is_limit_1&&this.info.room.stock,i},hideRecordList:function(){this.isRecordList=!1},showRecordList:function(){this.isRecordList=!0},showTips:function(){t.navigateTo({url:"/pages/rule/index?type=yifanshang"})},gomybox:function(){t.reLaunch({url:"/pages/myBox/index"})},initData:function(){var t=this;return this.$http("/yifanshangs/".concat(this.uuid),"GET",{room_id:this.roomId}).then((function(i){t.info=i.data.info,t.roomId=t.info.room&&t.info.room.id,t.setTitleText()}))},setTitleText:function(){this.istry?t.setNavigationBarTitle({title:"试玩页面"}):t.setNavigationBarTitle({title:this.info.title})},hidePayPopup:function(){this.isPayPopup=!1},showSkuPopup:function(){this.$refs.detailPopup.open("bottom")},hideSkuPopup:function(){this.$refs.detailPopup.close()},buy:function(i){if(this.istry)if(0==i){if(t.showToast({title:"试玩模式下无法全收",icon:"none"}),!this.isEnableBtn(i))return!1}else{if(!this.isEnableBtn(i))return!1;this.payTotal=i,this.isPayPopup=!0}else{if(!this.isEnableBtn(i))return!1;this.payTotal=i,this.isPayPopup=!0}},showRoomPopup:function(){console.log("click ==="),this.isRoomPopup=!0},refreshRoom:function(){t.showLoading({title:"刷新中..."}),this.initData().then((function(i){t.hideLoading(),t.showToast({title:"刷新完成~",icon:"none"})}))},changeRoom:function(t){var i=this;this.selectedRoom=t,this.roomId=t.id,this.isRoomPopup=!1,this.isRecordList=!1,this.$nextTick((function(){return i.info.room.id=t.id,i.isRecordList=!0})),this.showAnimate(),this.initData()},showAnimate:function(){var t=this;this.startMoving=!0,setTimeout((function(){t.startMoving=!1}),300)},hideRoom:function(){this.isRoomPopup=!1},paySuccess:function(i){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o&&(this.isPayPopup=!1,t.showToast({title:"支付成功, 抽赏中",icon:"none"}),this.order={},this.isOpenPopup=!0,console.log("试玩"),console.log(this.isOpenPopup)),this.isPayPopup=!1,t.showToast({title:"支付成功, 抽赏中",icon:"none"}),this.order=i,this.isOpenPopup=!0},goBack:function(){this.isOpenPopup=!1,this.istry=!1,this.initData()},up_next_fun:function(){this.up_next=!this.up_next,console.log(this.up_next)}},onPageScroll:function(t){}};i.default=f}).call(this,o("543d")["default"])},"57ba":function(t,i,o){"use strict";o.r(i);var n=o("3c43"),e=o.n(n);for(var s in n)"default"!==s&&function(t){o.d(i,t,(function(){return n[t]}))}(s);i["default"]=e.a},"5e4a":function(t,i,o){"use strict";o.d(i,"b",(function(){return e})),o.d(i,"c",(function(){return s})),o.d(i,"a",(function(){return n}));var n={PriceDisplay:function(){return o.e("components/PriceDisplay/PriceDisplay").then(o.bind(null,"5f805"))},uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"c81d"))},BoxSkuPopup:function(){return o.e("components/BoxSkuPopup/BoxSkuPopup").then(o.bind(null,"430f"))},SharePopup:function(){return Promise.all([o.e("common/vendor"),o.e("components/SharePopup/SharePopup")]).then(o.bind(null,"825e"))},OpenBoxPopup:function(){return o.e("components/OpenBoxPopup/OpenBoxPopup").then(o.bind(null,"d494"))}},e=function(){var t=this,i=t.$createElement,o=(t._self._c,t.isEnableBtn(0)),n=t.isEnableBtn(0),e=t.isEnableBtn(0),s=t.isEnableBtn(1),r=t.isEnableBtn(3),u=t.isEnableBtn(5);t._isMounted||(t.e0=function(){this.is_show=0,this.isRecordList=!1},t.e1=function(){this.is_show=1,this.isRecordList=!0}),t.$mp.data=Object.assign({},{$root:{m0:o,m1:n,m2:e,m3:s,m4:r,m5:u}})},s=[]},"99e8":function(t,i,o){"use strict";(function(t){o("e335");n(o("66fd"));var i=n(o("e758"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(i.default)}).call(this,o("543d")["createPage"])},cbdc:function(t,i,o){},e758:function(t,i,o){"use strict";o.r(i);var n=o("5e4a"),e=o("57ba");for(var s in e)"default"!==s&&function(t){o.d(i,t,(function(){return e[t]}))}(s);o("39fb");var r,u=o("f0c5"),c=Object(u["a"])(e["default"],n["b"],n["c"],!1,null,"71a56ac8",null,!1,n["a"],r);i["default"]=c.exports}},[["99e8","common/runtime","common/vendor"]]]);